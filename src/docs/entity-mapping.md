# 엔티티 매핑

## @Entity

- `@Entity`가 붙은 클래스는 `JPA`가 관리한다
- JPA를 사용해 테이블과 매핑할 클래스는 `@Entity`를 붙인다
- **기본 생성자를 필수적으로 명시해줘야함**
- final 클래스, enum, interface, inner 클래스에서는 사용할 수 없다
- 저장할 필드에 `final` 사용 X

## @Table

- 엔티티와 매핑할 테이블 지정
- 매핑할 때 테이블 명을 바꾸고 싶을 때 사용

# 데이터베이스 스키마 자동 생성

- DDL을 애플리케이션 실행 시점에 자동 생성
- 테이블 중심 -> 객체 중심
    - 테이블을 만들어놓고 개발할 필요 없이
    객체를 만들고 매핑을 해놓으면 JPA가 알맞은 테이블을 생성해준다.
    - `@Entity`가 붙은 클래스에 필드를 추가하면 `JPA`가 새로 추가된 필드를 DB 테이블을 만들 때 새로 추가해준다.
- 데이터베이스 방언을 이용해 데이터베이스에 맞는 적절한 DDL 생성
- DDL은 개발할 때만 사용 (운영에선 X)
- 운영에서 사용하려면 DDL을 다듬은 후 사용

## 자동 생성 속성

`hibernate.hbm2ddl.auto`
옵션
- create : 기존 테이블 삭제 후 다시 생성 (drop + create)
- create-drop : 테이블 생성 후 종료 시점에 테이블 drop
- update : 변경분만 반영 (운영 DB에서 사용 X)
- validate : 엔티티와 테이블의 매핑만 확인
- none : 사용하지 않음

### 데이터베이스 스키마 자동 생성 시 주의할 점

- 운영에서는 절대 `create` `create-drop` `update` 를 사용해선 안 된다
- 개발 초기 단계에는 `create` 혹은 `update`
- 테스트 서버는 `update` `validate`
- 스테이징과 운영 서버는 `validate` 또는 `none`

**local에서만 자유롭게 하고 여러 명이 쓰는 개발 서버나 스테이징에서는 가급적 스키마 자동 생성을 사용하지 않는다**