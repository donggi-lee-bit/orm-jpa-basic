# 양방향 매핑

## 테이블 연관관계와 양방향 객체 연관관계의 차이

- 테이블의 연관관계는 방향이라는 개념이 없다
  - 테이블은 FK 하나로 양쪽 테이블을 참조할 수 있다
- 객체는 연관관계가 있는 객체를 각각 넣어줘야 참조할 수 있다
- 객체는 단방향 두 개로 양방향을 구현

## 연관관계의 주인

객체를 양방향 매핑하기 위해서는 연관관계를 맺고자하는 두 개의 객체가 각각 단방향 매핑을 해주어야한다.
A, B 객체 중 어느 객체를 불러와 값을 수정해야할지 알 수 없다.
이 떄 연관관계 주인을 지정하여 주인만이 외래 키를 관리하도록 한다.

### 양방향 매핑 규칙

1. 객체의 두 관계중 하나를 연관관계 주인으로 지정
2. **연관관계의 주인만 외래 키를 관리 (등록, 수정)**
3. **주인이 아닌 쪽은 읽기만 가능**
4. 주인은 `mappedBy` 속성 사용 X
5. 주인이 아니면 `mappedBy` 속성으로 주인을 지정

### 누구를 주인으로

- 외래 키가 있는 곳을 주인으로 정한다
  - db 입장에서 외래키가 있는 곳이 다(일대다의 그 '다')다.
  - 다 쪽이 `ManyToOne`
